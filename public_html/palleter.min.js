/*! fracgen 2017-04-05 */
function Vec3(){var a=0,b=0,c=0;if(3==arguments.length)a=arguments[0],b=arguments[1],c=arguments[2];else if(1==arguments.length){var d=arguments[0];void 0!==d&&(a=d.x,b=d.y,c=d.z)}else a=Math.random(),b=Math.random(),c=Math.random();this.x=a,this.y=b,this.z=c}function pallete(a,b,c,d,e){if("number"!=typeof a&&"object"!=typeof b&&"object"!=typeof c&&"object"!=typeof d&&"object"!=typeof e)throw new TypeError("pallete wrong arguments","vector.js");return new Vec3(d).mul(a).add(e).mul(2*Math.PI).cos().mul(c).add(b).toRGB()}function drawPallete(a,b,c,d,e,f,g){for(var h,i=1/b,j=0,k=[],l=0;l<b;l++)h=pallete(j,d,e,f,g),j+=i,k.concat([h.x,h.y,h.z,255]);for(var m=0;m<c;m++)a.concat(k)}Vec3.prototype.sin=function(){return this.x=Math.sin(this.x),this.y=Math.sin(this.y),this.z=Math.sin(this.z),this},Vec3.prototype.cos=function(){return this.x=Math.cos(this.x),this.y=Math.cos(this.y),this.z=Math.cos(this.z),this},Vec3.prototype.add=function(a){return"number"==typeof a?(this.x+=a,this.y+=a,this.z+=a):(this.x+=a.x,this.y+=a.y,this.z+=a.z),this},Vec3.prototype.sub=function(a){return"number"==typeof a?(this.x+=-a,this.y+=-a,this.z+=-a):(this.x+=-a.x,this.y+=-a.y,this.z+=-a.z),this},Vec3.prototype.mul=function(a){return"number"==typeof a?(this.x*=a,this.y*=a,this.z*=a):(this.x*=a.x,this.y*=a.y,this.z*=a.z),this},Vec3.prototype.mod=function(a){return"number"==typeof a?(this.x%=a,this.y%=a,this.z%=a):(this.x%=a.x,this.y%=a.y,this.z%=a.z),this},Vec3.prototype.toRGB=function(){return this.x=Math.round(255*this.x),this.y=Math.round(255*this.y),this.z=Math.round(255*this.z),this},Vec3.prototype.equals=function(a){return"object"==typeof a&&(this===a||this.x==a.x&&this.y==a.y&&this.z==a.z)},onmessage=function(a){var b=new Uint8ClampedArray(a.data.width*a.data.height*4);drawPallete(b,a.data.width,a.data.height,new Vec3(a.data.a),new Vec3(a.data.b),new Vec3(a.data.c),new Vec3(a.data.d)),postMessage({imageData:b})};